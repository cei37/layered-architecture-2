{"ast":null,"code":"// src/components/User/UserComponent.tsx\nimport React,{useState,useEffect}from'react';import{useUser,useUpdateUser}from'../../hooks/useUser';import{CircularProgress,TextField,Button}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserComponent=_ref=>{let{userId}=_ref;const{data:user,error,isLoading}=useUser(userId);const[formState,setFormState]=useState({id:null,name:'',email:''});const mutation=useUpdateUser();useEffect(()=>{if(user){setFormState({id:user.id,name:user.fullName,email:user.email});}},[user]);const handleSave=()=>{if(formState.id!==null&&user){const updatedUser={id:formState.id,fullName:formState.name,// Map name to fullName\nemail:formState.email,age:user.age,// Retain age if it exists\nisAdult:user.isAdult// Retain isAdult if it exists\n};mutation.mutate(updatedUser);}};if(isLoading)return/*#__PURE__*/_jsx(CircularProgress,{});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{label:\"Name\",value:formState.name,onChange:e=>setFormState(prev=>prev?{...prev,name:e.target.value}:prev)}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",value:formState.email,onChange:e=>setFormState(prev=>prev?{...prev,email:e.target.value}:prev)}),/*#__PURE__*/_jsx(Button,{onClick:handleSave,disabled:mutation.isLoading,children:\"Save\"})]});};export default UserComponent;","map":{"version":3,"names":["React","useState","useEffect","useUser","useUpdateUser","CircularProgress","TextField","Button","jsx","_jsx","jsxs","_jsxs","UserComponent","_ref","userId","data","user","error","isLoading","formState","setFormState","id","name","email","mutation","fullName","handleSave","updatedUser","age","isAdult","mutate","children","message","label","value","onChange","e","prev","target","onClick","disabled"],"sources":["/Users/cei37/layered-architecture-2/src/components/User/UserComponent.tsx"],"sourcesContent":["// src/components/User/UserComponent.tsx\nimport React, { useState, useEffect } from 'react';\nimport { useUser, useUpdateUser } from '../../hooks/useUser';\nimport { UserEntity } from '../../models/UserEntity';\nimport { CircularProgress, TextField, Button } from '@mui/material';\n\nconst UserComponent: React.FC<{ userId: number }> = ({ userId }) => {\n  const { data: user, error, isLoading } = useUser(userId);\n  const [formState, setFormState] = useState<{ id: number | null; name: string; email: string }>({\n    id: null,\n    name: '',\n    email: '',\n  });\n  const mutation = useUpdateUser();\n\n  useEffect(() => {\n    if (user) {\n      setFormState({\n        id: user.id,\n        name: user.fullName,\n        email: user.email,\n      });\n    }\n  }, [user]);\n\n  const handleSave = () => {\n    if (formState.id !== null && user) {\n      const updatedUser: UserEntity = {\n        id: formState.id,\n        fullName: formState.name,  // Map name to fullName\n        email: formState.email,\n        age: user.age,             // Retain age if it exists\n        isAdult: user.isAdult      // Retain isAdult if it exists\n      };\n      mutation.mutate(updatedUser);\n    }\n  };\n\n  if (isLoading) return <CircularProgress />;\n  if (error) return <div>Error: {error.message}</div>;\n\n  return (\n    <div>\n      <TextField\n        label=\"Name\"\n        value={formState.name}\n        onChange={(e) =>\n          setFormState((prev) => (prev ? { ...prev, name: e.target.value } : prev))\n        }\n      />\n      <TextField\n        label=\"Email\"\n        value={formState.email}\n        onChange={(e) =>\n          setFormState((prev) => (prev ? { ...prev, email: e.target.value } : prev))\n        }\n      />\n      <Button onClick={handleSave} disabled={mutation.isLoading}>\n        Save\n      </Button>\n    </div>\n  );\n};\n\nexport default UserComponent;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,CAAEC,aAAa,KAAQ,qBAAqB,CAE5D,OAASC,gBAAgB,CAAEC,SAAS,CAAEC,MAAM,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpE,KAAM,CAAAC,aAA2C,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC7D,KAAM,CAAEE,IAAI,CAAEC,IAAI,CAAEC,KAAK,CAAEC,SAAU,CAAC,CAAGf,OAAO,CAACW,MAAM,CAAC,CACxD,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAqD,CAC7FoB,EAAE,CAAE,IAAI,CACRC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EACT,CAAC,CAAC,CACF,KAAM,CAAAC,QAAQ,CAAGpB,aAAa,CAAC,CAAC,CAEhCF,SAAS,CAAC,IAAM,CACd,GAAIc,IAAI,CAAE,CACRI,YAAY,CAAC,CACXC,EAAE,CAAEL,IAAI,CAACK,EAAE,CACXC,IAAI,CAAEN,IAAI,CAACS,QAAQ,CACnBF,KAAK,CAAEP,IAAI,CAACO,KACd,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACP,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAU,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAIP,SAAS,CAACE,EAAE,GAAK,IAAI,EAAIL,IAAI,CAAE,CACjC,KAAM,CAAAW,WAAuB,CAAG,CAC9BN,EAAE,CAAEF,SAAS,CAACE,EAAE,CAChBI,QAAQ,CAAEN,SAAS,CAACG,IAAI,CAAG;AAC3BC,KAAK,CAAEJ,SAAS,CAACI,KAAK,CACtBK,GAAG,CAAEZ,IAAI,CAACY,GAAG,CAAc;AAC3BC,OAAO,CAAEb,IAAI,CAACa,OAAa;AAC7B,CAAC,CACDL,QAAQ,CAACM,MAAM,CAACH,WAAW,CAAC,CAC9B,CACF,CAAC,CAED,GAAIT,SAAS,CAAE,mBAAOT,IAAA,CAACJ,gBAAgB,GAAE,CAAC,CAC1C,GAAIY,KAAK,CAAE,mBAAON,KAAA,QAAAoB,QAAA,EAAK,SAAO,CAACd,KAAK,CAACe,OAAO,EAAM,CAAC,CAEnD,mBACErB,KAAA,QAAAoB,QAAA,eACEtB,IAAA,CAACH,SAAS,EACR2B,KAAK,CAAC,MAAM,CACZC,KAAK,CAAEf,SAAS,CAACG,IAAK,CACtBa,QAAQ,CAAGC,CAAC,EACVhB,YAAY,CAAEiB,IAAI,EAAMA,IAAI,CAAG,CAAE,GAAGA,IAAI,CAAEf,IAAI,CAAEc,CAAC,CAACE,MAAM,CAACJ,KAAM,CAAC,CAAGG,IAAK,CACzE,CACF,CAAC,cACF5B,IAAA,CAACH,SAAS,EACR2B,KAAK,CAAC,OAAO,CACbC,KAAK,CAAEf,SAAS,CAACI,KAAM,CACvBY,QAAQ,CAAGC,CAAC,EACVhB,YAAY,CAAEiB,IAAI,EAAMA,IAAI,CAAG,CAAE,GAAGA,IAAI,CAAEd,KAAK,CAAEa,CAAC,CAACE,MAAM,CAACJ,KAAM,CAAC,CAAGG,IAAK,CAC1E,CACF,CAAC,cACF5B,IAAA,CAACF,MAAM,EAACgC,OAAO,CAAEb,UAAW,CAACc,QAAQ,CAAEhB,QAAQ,CAACN,SAAU,CAAAa,QAAA,CAAC,MAE3D,CAAQ,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}